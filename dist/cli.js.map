{"version":3,"sources":["../libs/cli.js"],"names":[],"mappings":"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","file":"cli.js","sourcesContent":["import path from 'path'\r\nimport keypress from 'keypress'\r\nimport Player from '../dist/player'\r\n\r\nexport default function() {\r\n  var command = process.argv[2]\r\n  if (!command)\r\n    return\r\n\r\n  var songs = process.argv.splice(3)\r\n  if (!songs || songs.length === 0)\r\n    return\r\n\r\n  var player = new Player(format(songs))\r\n\r\n  try {\r\n    player[command]()\r\n  } catch (err) {\r\n    console.log(err)\r\n  }\r\n\r\n  function format(songs) {\r\n    return songs.map((songPath) => {\r\n      if (isAbs(songPath))\r\n        return songPath\r\n\r\n      return path.join(process.cwd(), songPath)\r\n    })\r\n  }\r\n\r\n  function isAbs(str) {\r\n    if (str.indexOf('http') === 0 || str.indexOf('https') === 0)\r\n      return true\r\n\r\n    var beginWith = str.charAt(0)\r\n    if (beginWith === '~' || beginWith == '/')\r\n      return true\r\n\r\n    return false\r\n  }\r\n\r\n  var vol = 1\r\n\r\n  function updateVolume() {\r\n    player.setVolume(vol)\r\n    console.log('volume: ' + Math.floor(vol * 100))\r\n  }\r\n\r\n  keypress(process.stdin);\r\n\r\n  var paused = false\r\n\r\n  process.stdin.on('keypress', function (ch, key) {\r\n    if (key && key.ctrl && key.name == 'c') {\r\n      process.exit(0)\r\n    }\r\n    if (key && key.name == 'space') {\r\n      player.pause()\r\n      if(!paused)\r\n        console.log('paused')\r\n      else\r\n        console.log('resuming')\r\n      paused = !paused\r\n    }\r\n    if (key && key.name == 'x') {\r\n      player.stop()\r\n      console.log('stopped')\r\n    }\r\n    if (key && key.name == 's') {\r\n      player.play()\r\n      console.log('playing')\r\n    }\r\n    if (key && key.name == 'up') {\r\n      vol += 0.1;\r\n      if(vol > 1) {\r\n          vol = 1\r\n      }\r\n      updateVolume()\r\n    }\r\n    if (key && key.name == 'down') {\r\n      vol -= 0.1;\r\n      if(vol < 0) {\r\n          vol = 0\r\n      }\r\n      updateVolume()\r\n    }\r\n  });\r\n\r\n  process.stdin.setRawMode(true)\r\n  process.stdin.resume()\r\n\r\n  console.log('press \"x\" to stop, press \"s\" to play, press \"space\" to pause / resume')\r\n  console.log('press \"Up\" to increase volume, press \"Down\" to decrease volume')\r\n}\r\n"]}